<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.2"?>
<plugin>
   <extension-point id="dropRestriction" name="Requirement Drop Restriction in target Models" schema="schema/dropRestriction.exsd"/>
   <extension-point id="specificDropAction" name="Define creation of specific actions on requirement drop" schema="schema/specificDropAction.exsd"/>
   <extension-point id="modelAttachmentPolicy" name="enable to attach a topcased model to a requirement model" schema="schema/modelAttachmentPolicy.exsd"/>
   <extension-point id="requirementIdentifierVariables" name="Provide ways to add Variables to the requirement naming pattern" schema="schema/requirementIdentifierVariables.exsd"/>
   <extension-point id="requirementTransformation" name="Extension point to implement transformation from file to requirement" schema="schema/requirementTransformation.exsd"/>
   <extension-point id="requirementCountingAlgorithm" name="Extension point to implement the counting algorithm of requirements" schema="schema/requirementCountingAlgorithm.exsd"/>
   <extension-point id="upstreamstyles" name="Upstream Requirement Styles" schema="schema/upstreamstyles.exsd"/>
   <extension-point id="mergeRequirementProcessor" name="Merge Requirement Processor" schema="schema/mergeRequirementProcessor.exsd"/>
   <extension-point id="supportingEditors" name="Editors supporting the requirements" schema="schema/supportingEditors.exsd"/>
   <extension-point id="importDocument" name="importDocument" schema="schema/importDocument.exsd"/>
   <extension-point id="dropTools" name="Upstream Requirement Drop Adapter" schema="schema/dropTools.exsd"/>
   <extension-point id="updateTransformationProvider" name="Update Transformation Provider" schema="schema/updateTransformationProvider.exsd"/>
   <extension
         point="org.eclipse.core.runtime.preferences">
      <initializer
            class="org.topcased.requirement.core.preferences.RequirementPreferenceInitializer">
      </initializer>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="org.topcased.requirement.core.handlers.LinkRequirementModelHandler"
            commandId="org.topcased.requirement.core.linkRequirement">
         <activeWhen>
            <with
                  variable="activeEditor">
               <test
                     property="org.topcased.requirement.core.activeEditorEnablesRequirements">
               </test>
            </with>	
         </activeWhen>
      </handler>
      <handler
            class="org.topcased.requirement.core.handlers.LinkWithEditorHandler"
            commandId="org.topcased.requirement.core.linkWithEditor">
         <activeWhen>
            <with
                  variable="requirementActionsEnablement.hasRequirementModel">
               <equals
                     value="true">
               </equals>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.topcased.requirement.core.handlers.ExpandHandler"
            commandId="org.topcased.requirement.core.expand">
      </handler>
      <handler
            class="org.topcased.requirement.core.handlers.CollapseHandler"
            commandId="org.topcased.requirement.core.collapse">
      </handler>
      <handler
            class="org.topcased.requirement.core.handlers.MoveUpHandler"
            commandId="org.topcased.requirement.core.moveUp">
         <activeWhen>
            <with
                  variable="selection">
               <iterate>
                  <or>
                     <instanceof
                           value="org.topcased.requirement.Requirement">
                     </instanceof>
                     <instanceof
                           value="org.topcased.requirement.HierarchicalElement">
                     </instanceof>
                  </or></iterate>
               <count
                     value="+">
               </count>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.topcased.requirement.core.handlers.MoveDownHandler"
            commandId="org.topcased.requirement.core.moveDown">
         <activeWhen>
            <with
                  variable="selection">
               <iterate>
                  <or>
                     <instanceof
                           value="org.topcased.requirement.Requirement">
                     </instanceof>
                     <instanceof
                           value="org.topcased.requirement.HierarchicalElement">
                     </instanceof>
                  </or>
               </iterate>
               <count
                     value="+">
               </count>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.topcased.requirement.core.handlers.UpdateRequirementModelHandler"
            commandId="org.topcased.requirement.core.updateRequirementModel">
         <activeWhen>
            <and>
               <with
                     variable="requirementActionsEnablement.hasRequirementModel">
                  <equals
                        value="true">
                  </equals>
               </with>
            </and>
         </activeWhen>
      </handler>
      <handler
            class="org.topcased.requirement.core.handlers.UnlinkRequirementModelHandler"
            commandId="org.topcased.requirement.core.unlinkRequirementModel">
         <activeWhen>
            <with
                  variable="requirementActionsEnablement.hasRequirementModel">
               <equals
                     value="true">
               </equals>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.topcased.requirement.core.handlers.FlatHandler"
            commandId="org.topcased.requirement.core.flat">
         <activeWhen>
            <with
                  variable="requirementActionsEnablement.hasRequirementModel">
               <equals
                     value="true">
               </equals>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.topcased.requirement.core.handlers.HierarchicalHandler"
            commandId="org.topcased.requirement.core.hierarchical">
         <activeWhen>
            <with
                  variable="requirementActionsEnablement.hasRequirementModel">
               <equals
                     value="true">
               </equals>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.topcased.requirement.core.handlers.SortHandler"
            commandId="org.topcased.requirement.core.sort">
         <activeWhen>
            <with
                  variable="requirementActionsEnablement.hasRequirementModel">
               <equals
                     value="true">
               </equals>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.topcased.requirement.core.handlers.LinkToUpstreamHandler"
            commandId="org.topcased.requirement.core.linkToUpstream">
         <activeWhen>
            <with
                  variable="requirementActionsEnablement.hasRequirementModel">
               <equals
                     value="true">
               </equals>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.topcased.requirement.core.handlers.FilterCurrentRequirementsHandler"
            commandId="org.topcased.requirement.core.filterCurrentRequirements">
         <activeWhen>
            <with
                  variable="requirementActionsEnablement.hasRequirementModel">
               <equals
                     value="true">
               </equals>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.topcased.requirement.core.handlers.DeleteHandler"
            commandId="org.topcased.requirement.core.delete">
         <enabledWhen>
            <with
                  variable="selection">
               <iterate
                     ifEmpty="false">
                  <or>
                     <instanceof
                           value="ttm.Document">
                     </instanceof>
                     <and>
                        <instanceof
                              value="org.topcased.requirement.ObjectAttribute">
                        </instanceof>
                        <test
                              property="org.topcased.requirement.core.notLastAttribute">
                        </test>
                     </and>
                     <and>
                        <instanceof
                              value="org.topcased.requirement.Requirement">
                        </instanceof>
                        <not>
                           <test
                                 property="org.topcased.requirement.core.isImpacted">
                           </test>
                        </not>
                     </and>
                     <and>
                        <instanceof
                              value="org.topcased.requirement.HierarchicalElement">
                        </instanceof>
                        <not>
                           <test
                                 property="org.topcased.requirement.core.isImpacted">
                           </test>
                        </not>
                     </and>
                  </or>
               </iterate>
            </with>
         </enabledWhen>
      </handler>
      <handler
            class="org.topcased.requirement.core.handlers.CopyHandler"
            commandId="org.topcased.requirement.core.copy">
         <enabledWhen>
            <with
                  variable="selection">
               <iterate
                     ifEmpty="false">
                  <instanceof
                        value="org.topcased.requirement.Requirement">
                  </instanceof>
               </iterate>
            </with>
         </enabledWhen>
      </handler>
      <handler
            class="org.topcased.requirement.core.handlers.CutHandler"
            commandId="org.topcased.requirement.core.cut">
         <enabledWhen>
            <with
                  variable="selection">
               <iterate
                     ifEmpty="false">
                  <instanceof
                        value="org.topcased.requirement.Requirement">
                  </instanceof>
               </iterate>
            </with>
         </enabledWhen>
      </handler>
      <handler
            class="org.topcased.requirement.core.handlers.PasteHandler"
            commandId="org.topcased.requirement.core.paste">
         <enabledWhen>
            <with
                  variable="selection">
               <iterate
                     ifEmpty="false">
                  <and>
                     <instanceof
                           value="org.topcased.requirement.HierarchicalElement">
                     </instanceof>
                     <test
                           property="org.topcased.requirement.core.canPaste">
                     </test>
                  </and>
               </iterate>
            </with>
         </enabledWhen>
      </handler>
      <handler
            class="org.topcased.requirement.core.handlers.LoadResourceHandler"
            commandId="org.topcased.requirement.core.loadResource">
      </handler>
      <handler
            class="org.topcased.requirement.core.handlers.CreateCurrentRequirementHandler"
            commandId="org.topcased.requirement.core.createCurrentRequirement">
         <enabledWhen>
            <with
                  variable="selection">
               <iterate
                     ifEmpty="false">
                  <or>
                     <instanceof
                           value="org.topcased.requirement.Requirement">
                     </instanceof>
                     <instanceof
                           value="org.topcased.requirement.HierarchicalElement">
                     </instanceof>
                     <and>
                        <instanceof
                              value="org.eclipse.gef.EditPart">
                        </instanceof>
                        <test
                              property="org.topcased.requirement.core.canCreateRequirement">
                        </test>
                     </and>
                  </or>
               </iterate>
            </with>
         </enabledWhen>
      </handler>
      <handler
            class="org.topcased.requirement.core.handlers.CreateAnonymousRequirementHandler"
            commandId="org.topcased.requirement.core.createAnonymousRequirement">
         <enabledWhen>
            <with
                  variable="selection">
               <iterate
                     ifEmpty="false">
                  <or>
                     <instanceof
                           value="org.topcased.requirement.Requirement">
                     </instanceof>
                     <instanceof
                           value="org.topcased.requirement.HierarchicalElement">
                     </instanceof>
                     <and>
                        <instanceof
                              value="org.eclipse.gef.EditPart">
                        </instanceof>
                        <test
                              property="org.topcased.requirement.core.canCreateRequirement">
                        </test>
                     </and>
                  </or>
               </iterate>
            </with></enabledWhen>
      </handler>
      <handler
            class="org.topcased.requirement.core.handlers.AddAttributeHandler"
            commandId="org.topcased.requirement.core.addAttribute">
         <enabledWhen>
            <with
                  variable="selection">
               <iterate
                     ifEmpty="false">
                  <instanceof
                        value="org.topcased.requirement.ObjectAttribute">
                  </instanceof>
               </iterate>
            </with>
         </enabledWhen>
      </handler>
      <handler
            class="org.topcased.requirement.core.handlers.SetAsValidHandler"
            commandId="org.topcased.requirement.core.setAsValid">
         <enabledWhen>
            <with
                  variable="selection">
               <iterate
                     ifEmpty="false">
                  <and>
                     <instanceof
                           value="org.topcased.requirement.Requirement">
                     </instanceof>
                     <test
                           property="org.topcased.requirement.core.isImpacted">
                     </test>
                  </and>
               </iterate>
            </with>
         </enabledWhen>
      </handler>
      <handler
            class="org.topcased.requirement.core.handlers.SetUnsetPartialHandler"
            commandId="org.topcased.requirement.core.setUnsetPartial">
         <enabledWhen>
            <with
                  variable="selection">
               <iterate
                     ifEmpty="false">
                  <instanceof
                        value="org.topcased.requirement.AttributeLink">
                  </instanceof>
               </iterate>
            </with></enabledWhen>
      </handler>
      <handler
            class="org.topcased.requirement.core.handlers.UnallocateHandler"
            commandId="org.topcased.requirement.core.unallocate">
         <enabledWhen>
            <with
                  variable="selection">
               <iterate
                     ifEmpty="false">
                  <or>
                     <instanceof
                           value="org.topcased.requirement.Requirement">
                     </instanceof>
                     <instanceof
                           value="org.topcased.requirement.HierarchicalElement">
                     </instanceof>
                  </or>
               </iterate>
            </with>
         </enabledWhen>
      </handler>
      <handler
            class="org.topcased.requirement.core.handlers.UpdateAttributeHandler"
            commandId="org.topcased.requirement.core.updateAttribute">
         <enabledWhen>
            <with
                  variable="selection">
               <iterate
                     ifEmpty="false">
                  <or>
                     <instanceof
                           value="org.topcased.requirement.Requirement">
                     </instanceof>
                     <instanceof
                           value="org.topcased.requirement.HierarchicalElement">
                     </instanceof>
                  </or>
               </iterate>
            </with></enabledWhen>
      </handler>
      <handler
            class="org.topcased.requirement.core.handlers.UpdateAttributeConfigurationHandler"
            commandId="org.topcased.requirement.core.updateAttributeConfiguration">
         <enabledWhen>
               <with
                     variable="selection">
                  <iterate
                        ifEmpty="false">
                     <instanceof
                           value="org.topcased.requirement.AttributeConfiguration">
                     </instanceof>
                  </iterate>
               </with>
         </enabledWhen>
      </handler>
      <handler
            class="org.topcased.requirement.core.handlers.UndoHandler"
            commandId="org.topcased.requirement.core.undo">
      </handler>
      <handler
            class="org.topcased.requirement.core.handlers.RedoHandler"
            commandId="org.topcased.requirement.core.redo">
      </handler>
      <handler
            class="org.topcased.requirement.core.handlers.TreeHandler"
            commandId="org.topcased.requirement.core.tree">
         <activeWhen>
            <and>
               <with
                     variable="activeWorkbenchWindow.activePerspective">
                  <equals
                        value="org.topcased.requirement.core.perspective">
                  </equals>
               </with>
               <with
                     variable="requirementActionsEnablement.hasRequirementModel">
                  <equals
                        value="true">
                  </equals>
               </with>
            </and>
         </activeWhen>
      </handler>
      <handler
            class="org.topcased.requirement.core.handlers.TableHandler"
            commandId="org.topcased.requirement.core.table">
         <activeWhen>
            <and>
               <with
                     variable="activeWorkbenchWindow.activePerspective">
                  <equals
                        value="org.topcased.requirement.core.perspective">
                  </equals>
               </with>
               <with
                     variable="requirementActionsEnablement.hasRequirementModel">
                  <equals
                        value="true">
                  </equals>
               </with>
            </and>
         </activeWhen>
      </handler>
      <handler
            class="org.topcased.requirement.core.handlers.ImportUpstreamDocumentHandler"
            commandId="org.topcased.requirement.core.addDoc">
         <activeWhen>
            <and>
               <with
                     variable="requirementActionsEnablement.hasRequirementModel">
                  <equals
                        value="true">
                  </equals>
               </with>
            </and>
         </activeWhen>
      </handler>
      <handler
            class="org.topcased.requirement.core.handlers.TrashHandler"
            commandId="org.topcased.requirement.core.trash">
      </handler>
      <handler
            class="org.topcased.requirement.core.handlers.ToggleTrashRequirementFilterHandler"
            commandId="org.topcased.requirement.core.filterTrashRequirements">
      </handler>
      <handler
            class="org.topcased.requirement.core.handlers.ToggleInvalidRequirementFilterHandler"
            commandId="org.topcased.requirement.core.filterInvalidRequirements">
      </handler>
      <handler
            class="org.topcased.requirement.core.handlers.ToggleValidRequirementFilterHandler"
            commandId="org.topcased.requirement.core.filterValidRequirements">
      </handler>
      <handler
            class="org.topcased.requirement.core.handlers.ImpactAnalysisHandler"
            commandId="org.topcased.requirement.core.impactAnalysis">
         <activeWhen>
            <with
                  variable="activeEditor">
               <test
                     property="org.topcased.requirement.core.activeEditorEnablesRequirements">
               </test>
            </with>
         </activeWhen>
      </handler>
      <handler
            class="org.topcased.requirement.core.handlers.TrackDeletedCurrentRequirementsHandler"
            commandId="org.topcased.requirement.core.trackDeletedCurrentRequirements">
      </handler>
      <handler
            class="org.topcased.requirement.core.handlers.UntrackDeletedCurrentRequirementsHandler"
            commandId="org.topcased.requirement.core.untrackDeletedCurrentRequirements">
      </handler>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            locationURI="popup:org.eclipse.ui.popup.any?after=additions">
         <command
               commandId="org.topcased.requirement.core.createCurrentRequirement"
               label="&amp;Create Current Requirement"
               style="push">
            <visibleWhen
                  checkEnabled="false">

                  <with
                        variable="activeMenuSelection">
                     <iterate
                           ifEmpty="false">
                        <and>
                           <instanceof
                                 value="org.eclipse.gef.EditPart">
                           </instanceof>
                           <test
                                 property="org.topcased.requirement.core.canCreateRequirement">
                           </test>
                        </and>
                     </iterate>
                  </with>
            </visibleWhen>
         </command>
         <command
               commandId="org.topcased.requirement.core.createAnonymousRequirement"
               label="&amp;Create Free Text"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <and>
                  <with
                        variable="activeWorkbenchWindow.activePerspective">
                     <equals
                           value="org.topcased.requirement.core.perspective">
                     </equals>
                  </with>
                  <with
                        variable="activeMenuSelection">
                     <iterate
                           ifEmpty="false">
                        <and>
                           <instanceof
                                 value="org.eclipse.gef.EditPart">
                           </instanceof>
                           <test
                                 property="org.topcased.requirement.core.canCreateRequirement">
                           </test>
                        </and>
                     </iterate>
                  </with>
               </and>
            </visibleWhen>
         </command>
      </menuContribution>
      <menuContribution
            locationURI="toolbar:org.eclipse.ui.main.toolbar?after=additions">
         <toolbar
               id="org.topcased.requirement.core.mainToolbar">
            <command
                  commandId="org.topcased.requirement.core.linkRequirement"
                  label="&amp;Attach Requirements"
                  style="push">
            </command>
         </toolbar>
      </menuContribution>
            <menuContribution
                  locationURI="toolbar:org.topcased.requirement.core.currentView">
               <command
                     commandId="org.topcased.requirement.core.linkWithEditor"
                     label="&amp;Link With Editor"
                     style="toggle">
                  <visibleWhen
                        checkEnabled="false">
                     <with
                           variable="requirementActionsEnablement.hasRequirementModel">
                        <equals
                              value="true">
                        </equals>
                     </with>
                  </visibleWhen>
               </command>
               <separator
                     name="org.topcased.requirement.core.separatorMiddle"
                     visible="true">
               </separator>
               <command
                     commandId="org.topcased.requirement.core.expand"
                     label="&amp;Expand"
                     style="push">
                  <visibleWhen
                        checkEnabled="false">
                     <with
                           variable="requirementActionsEnablement.hasRequirementModel">
                        <equals
                              value="true">
                        </equals>
                     </with>
                  </visibleWhen>
               </command>
               <command
                     commandId="org.topcased.requirement.core.collapse"
                     label="&amp;Collapse"
                     style="push">
                  <visibleWhen
                        checkEnabled="false">
                     <with
                           variable="requirementActionsEnablement.hasRequirementModel">
                        <equals
                              value="true">
                        </equals>
                     </with>
                  </visibleWhen>
               </command>
               <command
                     commandId="org.topcased.requirement.core.moveUp"
                     label="&amp;Move Up"
                     style="push">
                  <visibleWhen
                        checkEnabled="false">
                     <with
                           variable="requirementActionsEnablement.hasRequirementModel">
                        <equals
                              value="true">
                        </equals>
                     </with>
                  </visibleWhen>
               </command>
               <command
                     commandId="org.topcased.requirement.core.moveDown"
                     label="&amp;Move Down"
                     style="push">
                  <visibleWhen
                        checkEnabled="false">
                     <with
                           variable="requirementActionsEnablement.hasRequirementModel">
                        <equals
                              value="true">
                        </equals>
                     </with>
                  </visibleWhen>
               </command>
               <menu
                     id="viewsLink"
                     label="Requirement Views link">
                  <command
                        commandId="org.topcased.requirement.core.linkToUpstream"
                        label="&amp;Link To Upstream Requirement"
                        style="toggle">
                  </command>
                  <command
                        commandId="org.topcased.requirement.core.filterCurrentRequirements"
                        label="&amp;Filter Current Requirements"
                        style="toggle">
                  </command>
                  <visibleWhen
                        checkEnabled="false">
                     <with
                           variable="requirementActionsEnablement.hasRequirementModel">
                        <equals
                              value="true">
                        </equals>
                     </with>
                  </visibleWhen>
               </menu>
            </menuContribution>
            <menuContribution
                  locationURI="toolbar:org.topcased.requirement.core.upstreamView">
               <command
                     commandId="org.topcased.requirement.core.addDoc"
                     label="&amp;Add Upstream Documents"
                     style="push">
                  <visibleWhen
                        checkEnabled="false">
                     <with
                           variable="requirementActionsEnablement.hasRequirementModel">
                        <equals
                              value="true">
                        </equals>
                     </with>
                  </visibleWhen>
               </command>
               <separator
                     name="leftSeparator"
                     visible="true">
               </separator>
               <command
                     commandId="org.topcased.requirement.core.updateRequirementModel"
                     label="&amp;Update Requirement Model"
                     style="push">
                  <visibleWhen
                        checkEnabled="false">
                     <with
                           variable="requirementActionsEnablement.hasRequirementModel">
                        <equals
                              value="true">
                        </equals>
                     </with>
                  </visibleWhen>
               </command>
               <command
                     commandId="org.topcased.requirement.core.unlinkRequirementModel"
                     label="&amp;Unlink Requirement Model"
                     style="push">
                  <visibleWhen
                        checkEnabled="false">
                     <with
                           variable="requirementActionsEnablement.hasRequirementModel">
                        <equals
                              value="true">
                        </equals>
                     </with>
                  </visibleWhen>
               </command>
               <separator
                     name="middleSeparator"
                     visible="true">
               </separator>
               <command
                     commandId="org.topcased.requirement.core.hierarchical"
                     label="&amp;Hierarchical"
                     style="toggle">
                  <visibleWhen
                        checkEnabled="false">
                     <with
                           variable="requirementActionsEnablement.hasRequirementModel">
                        <equals
                              value="true">
                        </equals>
                     </with>
                  </visibleWhen>
               </command>
               <command
                     commandId="org.topcased.requirement.core.flat"
                     label="&amp;Flat"
                     style="toggle">
                  <visibleWhen
                        checkEnabled="false">
                     <with
                           variable="requirementActionsEnablement.hasRequirementModel">
                        <equals
                              value="true">
                        </equals>
                     </with>
                  </visibleWhen>
               </command>
               <separator
                     name="rightSeparator"
                     visible="true">
               </separator>
               <command
                     commandId="org.topcased.requirement.core.sort"
                     label="&amp;Alphabetical orderSort"
                     style="toggle">
                  <visibleWhen
                        checkEnabled="false">
                     <with
                           variable="requirementActionsEnablement.hasRequirementModel">
                        <equals
                              value="true">
                        </equals>
                     </with>
                  </visibleWhen>
               </command>
            </menuContribution>
            <menuContribution
                  locationURI="menu:org.topcased.requirement.core.currentView">
               <command
                     commandId="org.topcased.requirement.core.linkToUpstream"
                     label="&amp;Link To Upstream Requirement"
                     style="toggle">
                  <visibleWhen
                        checkEnabled="false">
                     <with
                           variable="requirementActionsEnablement.hasRequirementModel">
                        <equals
                              value="true">
                        </equals>
                     </with>
                  </visibleWhen>
               </command>
               <command
                     commandId="org.topcased.requirement.core.filterCurrentRequirements"
                     label="&amp;Filter Current Requirements"
                     style="toggle">
                  <visibleWhen
                        checkEnabled="false">
                     <with
                           variable="requirementActionsEnablement.hasRequirementModel">
                        <equals
                              value="true">
                        </equals>
                     </with>
                  </visibleWhen>
               </command>
               <command
                     commandId="org.topcased.requirement.core.filterTrashRequirements"
                     label="Filter Trash Requirements"
                     style="toggle">
                  <visibleWhen
                        checkEnabled="false">
                     <with
                           variable="requirementActionsEnablement.hasRequirementModel">
                        <equals
                              value="true">
                        </equals>
                     </with>
                  </visibleWhen>
               </command>
               <command
                     commandId="org.topcased.requirement.core.filterInvalidRequirements"
                     label="Filter Invalid Requirements"
                     style="toggle">
                  <visibleWhen
                        checkEnabled="false">
                     <with
                           variable="requirementActionsEnablement.hasRequirementModel">
                        <equals
                              value="true">
                        </equals>
                     </with>
                  </visibleWhen>
               </command>
               <command
                     commandId="org.topcased.requirement.core.filterValidRequirements"
                     label="Filter Valid Requirements"
                     style="toggle">
                  <visibleWhen
                        checkEnabled="false">
                     <with
                           variable="requirementActionsEnablement.hasRequirementModel">
                        <equals
                              value="true">
                        </equals>
                     </with>
                  </visibleWhen>
               </command>
            </menuContribution>
            <menuContribution
                  locationURI="popup:org.topcased.requirement.core.views.upstream.popupMenu?after=lastSeparator">
               <command
                     commandId="org.topcased.requirement.core.delete"
                     label="&amp;Delete"
                     style="push">
                  <visibleWhen
                        checkEnabled="false">
                     <with
                           variable="activeMenuSelection">
                        <iterate
                              ifEmpty="false">
                           <instanceof
                                 value="ttm.Document">
                           </instanceof>
                        </iterate>
                     </with>
                  </visibleWhen>
               </command>
               <separator
                     name="org.topcased.requirement.core.separator1"
                     visible="true">
               </separator>
            </menuContribution>
            <menuContribution
                  locationURI="popup:org.topcased.requirement.core.views.current.popupMenu?after=lastSeparator">
               <command
                     commandId="org.topcased.requirement.core.delete"
                     label="&amp;Delete"
                     style="push">
                  <visibleWhen
                        checkEnabled="false">
                     <with
                           variable="activeMenuSelection">
                        <iterate
                              ifEmpty="false">
                           <or>
                              <instanceof
                                    value="org.topcased.requirement.Requirement">
                              </instanceof>
                              <instanceof
                                    value="org.topcased.requirement.HierarchicalElement">
                              </instanceof>
                              <instanceof
                                    value="org.topcased.requirement.AttributeLink">
                              </instanceof>
                           </or>
                        </iterate>
                     </with>
                  </visibleWhen>
               </command>
               <command
                     commandId="org.topcased.requirement.core.copy"
                     label="&amp;Copy"
                     style="push">
                  <visibleWhen
                        checkEnabled="false">
                     <with
                           variable="activeMenuSelection">
                        <iterate
                              ifEmpty="false">
                           <or>
                              <instanceof
                                    value="org.topcased.requirement.Requirement">
                              </instanceof>
                              <instanceof
                                    value="org.topcased.requirement.HierarchicalElement">
                              </instanceof>
                           </or>
                        </iterate>
                     </with>
                  </visibleWhen>
               </command>
               <command
                     commandId="org.topcased.requirement.core.cut"
                     label="&amp;Cut"
                     style="push">
                  <visibleWhen
                        checkEnabled="false">
                     <with
                           variable="activeMenuSelection">
                        <iterate
                              ifEmpty="false">
                           <or>
                              <instanceof
                                    value="org.topcased.requirement.Requirement">
                              </instanceof>
                              <instanceof
                                    value="org.topcased.requirement.HierarchicalElement">
                              </instanceof>
                           </or>
                        </iterate>
                     </with>
                  </visibleWhen>
               </command>
               <command
                     commandId="org.topcased.requirement.core.paste"
                     label="&amp;Paste"
                     style="push">
                  <visibleWhen
                        checkEnabled="false">
                     <with
                           variable="activeMenuSelection">
                        <iterate
                              ifEmpty="false">
                           <or>
                              <instanceof
                                    value="org.topcased.requirement.Requirement">
                              </instanceof>
                              <instanceof
                                    value="org.topcased.requirement.HierarchicalElement">
                              </instanceof>
                           </or>
                        </iterate>
                     </with>
                  </visibleWhen>
               </command>
               <separator
                     name="SEPARATOR1"
                     visible="true">
               </separator>
               <menu
                     id="markerMenu"
                     label="Set marker position">
                  <visibleWhen
                        checkEnabled="false">
                     <with
                           variable="activeMenuSelection">
                        <iterate
                              ifEmpty="false">
                           <or>
                              <instanceof
                                    value="org.topcased.requirement.Requirement">
                              </instanceof>
                              <instanceof
                                    value="org.topcased.requirement.HierarchicalElement">
                              </instanceof>
                           </or>
                        </iterate>
                     </with>
                  </visibleWhen>
                  <dynamic
                        class="org.topcased.requirement.core.handlers.SetMarkerDynamic"
                        id="org.topcased.requirement.core.setMarkerdynamic">
                  </dynamic>
               </menu>
               <command
                     commandId="org.topcased.requirement.core.setAsValid"
                     label="&amp;Set as valid"
                     style="push">
                  <visibleWhen
                        checkEnabled="false">
                     <with
                           variable="activeMenuSelection">
                        <iterate
                              ifEmpty="false">
                           <instanceof
                                 value="org.topcased.requirement.Requirement">
                           </instanceof>
                        </iterate>
                     </with>
                  </visibleWhen>
               </command>
               <command
                     commandId="org.topcased.requirement.core.addAttribute"
                     label="&amp;Create a new attribute"
                     style="push">
                  <visibleWhen
                        checkEnabled="false">
                     <with
                           variable="activeMenuSelection">
                        <iterate
                              ifEmpty="false">
                           <instanceof
                                 value="org.topcased.requirement.ObjectAttribute">
                           </instanceof>
                        </iterate>
                     </with>
                  </visibleWhen>
               </command>
               <command
                     commandId="org.topcased.requirement.core.setUnsetPartial"
                     label="&amp;Set/unset partial"
                     style="push">
                  <visibleWhen
                        checkEnabled="false">
                     <with
                           variable="activeMenuSelection">
                        <iterate
                              ifEmpty="false">
                           <instanceof
                                 value="org.topcased.requirement.AttributeLink">
                           </instanceof>
                        </iterate>
                     </with>
                  </visibleWhen>
               </command>
               <command
                     commandId="org.topcased.requirement.core.createCurrentRequirement"
                     label="&amp;Create Current Requirement"
                     style="push">
                  <visibleWhen
                        checkEnabled="false">
                     <with
                           variable="activeMenuSelection">
                        <iterate
                              ifEmpty="false">
                           <or>
                              <instanceof
                                    value="org.topcased.requirement.Requirement">
                              </instanceof>
                              <instanceof
                                    value="org.topcased.requirement.HierarchicalElement">
                              </instanceof>
                           </or>
                        </iterate>
                     </with>
                  </visibleWhen>
               </command>
               <command
                     commandId="org.topcased.requirement.core.createAnonymousRequirement"
                     label="&amp;Create Free Text"
                     style="push">
                  <visibleWhen
                        checkEnabled="false">
                     <with
                           variable="activeMenuSelection">
                        <iterate
                              ifEmpty="false">
                           <or>
                              <instanceof
                                    value="org.topcased.requirement.Requirement">
                              </instanceof>
                              <instanceof
                                    value="org.topcased.requirement.HierarchicalElement">
                              </instanceof>
                           </or>
                        </iterate>
                     </with>
                  </visibleWhen>
               </command>
               <command
                     commandId="org.topcased.requirement.core.updateAttributeConfiguration"
                     label="&amp;Update configuration"
                     style="push">
                  <visibleWhen
                        checkEnabled="false">
                     <with
                           variable="activeMenuSelection">
                        <iterate
                              ifEmpty="false">
                           <instanceof
                                 value="org.topcased.requirement.AttributeConfiguration">
                           </instanceof>
                        </iterate>
                     </with>
                  </visibleWhen>
               </command>
               <separator
                     name="SEPARATOR2"
                     visible="true">
               </separator>
               <command
                     commandId="org.topcased.requirement.core.updateAttribute"
                     label="&amp;Update attribute"
                     style="push">
                  <visibleWhen
                        checkEnabled="false">
                     <with
                           variable="activeMenuSelection">
                        <iterate
                              ifEmpty="false">
                           <or>
                              <instanceof
                                    value="org.topcased.requirement.Requirement">
                              </instanceof>
                              <instanceof
                                    value="org.topcased.requirement.HierarchicalElement">
                              </instanceof>
                           </or>
                        </iterate>
                     </with>
                  </visibleWhen>
               </command>
               <command
                     commandId="org.topcased.requirement.core.unallocate"
                     label="&amp;Unallocate requirement"
                     style="push">
                  <visibleWhen
                        checkEnabled="false">
                     <with
                           variable="activeMenuSelection">
                        <iterate
                              ifEmpty="false">
                           <or>
                              <instanceof
                                    value="org.topcased.requirement.Requirement">
                              </instanceof>
                              <instanceof
                                    value="org.topcased.requirement.HierarchicalElement">
                              </instanceof>
                           </or>
                        </iterate>
                     </with>
                  </visibleWhen>
               </command>
               <separator
                     name="SEPARATOR3"
                     visible="true">
               </separator>
               <command
                     commandId="org.topcased.requirement.core.loadResource"
                     label="&amp;Load additional resource"
                     style="push">
               </command>
               <separator
                     name="SEPARATOR4"
                     visible="true">
               </separator>
            </menuContribution>
            <menuContribution
                  locationURI="toolbar:org.eclipse.ui.views.PropertySheet?after=additions">
               <command
                     commandId="org.topcased.requirement.core.tree"
                     label="&amp;Tree"
                     style="toggle">
                  <visibleWhen
                        checkEnabled="false">
                     <with
                           variable="requirementActionsEnablement.isSectionEnabled">
                        <equals
                              value="true">
                        </equals>
                     </with>
                  </visibleWhen>
               </command>
               <command
                     commandId="org.topcased.requirement.core.table"
                     label="&amp;Table"
                     style="toggle">
                  <visibleWhen
                        checkEnabled="false">
                     <with
                           variable="requirementActionsEnablement.isSectionEnabled">
                        <equals
                              value="true">
                        </equals>
                     </with>
                  </visibleWhen>
               </command>
            </menuContribution>
            <menuContribution
                  locationURI="popup:org.topcased.requirement.core.views.current.popupMenu?after=lastSeparator">
               <command
                     commandId="org.topcased.requirement.core.trash"
                     icon="icons/trash.gif"
                     label="Move to trash"
                     style="push">
                  <visibleWhen
                        checkEnabled="false">
                     <with
                           variable="activeMenuSelection">
                        <iterate
                              ifEmpty="false">
                           <or>
                              <instanceof
                                    value="org.topcased.requirement.Requirement">
                              </instanceof>
                              <instanceof
                                    value="org.topcased.requirement.HierarchicalElement">
                              </instanceof>
                           </or>
                        </iterate>
                     </with>
                  </visibleWhen>
               </command>
            </menuContribution>
            <menuContribution
                  allPopups="false"
                  locationURI="popup:org.eclipse.team.ui.GenericHistoryView">
               <command
                     commandId="org.topcased.requirement.core.impactAnalysis"
                     icon="icons/update.gif"
                     label="Launch requirement impact analysis from this revision"
                     style="push">
               </command>
            </menuContribution>
            <menuContribution
                  locationURI="popup:org.topcased.requirement.core.views.current.popupMenu?after=lastSeparator">
               <command
                     commandId="org.topcased.requirement.core.trackDeletedCurrentRequirements"
                     icon="icons/trackdelrq.gif"
                     label="&amp;Track deleted current requirements"
                     style="push">
                  <visibleWhen
                        checkEnabled="true">
                  </visibleWhen>
               </command>
               <command
                     commandId="org.topcased.requirement.core.untrackDeletedCurrentRequirements"
                     icon="icons/trackdelrq.gif"
                     label="Do &amp;not track deleted current requirements"
                     style="push">
                  <visibleWhen
                        checkEnabled="true">
                  </visibleWhen>
               </command>
               <separator
                     name="SEPARATOR5"
                     visible="true">
               </separator>
            </menuContribution>
     </extension>
   <extension
         point="org.eclipse.ui.services">
      <sourceProvider
            provider="org.topcased.requirement.core.services.RequirementModelSourceProvider">
         <variable
               name="requirementActionsEnablement.hasRequirementModel"
               priorityLevel="workbench">
         </variable>
         <variable
               name="requirementActionsEnablement.isImpacted"
               priorityLevel="workbench">
         </variable>
         <variable
               name="requirementActionsEnablement.isSectionEnabled"
               priorityLevel="workbench">
         </variable>
      </sourceProvider>
   </extension>
   <extension
         point="org.eclipse.ui.commandImages">
      <image
            commandId="org.topcased.requirement.core.expand"
            icon="icons/expand.gif">
      </image>
      <image
            commandId="org.topcased.requirement.core.collapse"
            disabledIcon="IMG_ELCL_COLLAPSEALL_DISABLED"
            icon="IMG_ELCL_COLLAPSEALL">
      </image>
      <image
            commandId="org.topcased.requirement.core.moveUp"
            icon="icons/up.gif">
      </image>
      <image
            commandId="org.topcased.requirement.core.moveDown"
            icon="icons/down.gif">
      </image>
      <image
            commandId="org.topcased.requirement.core.linkWithEditor"
            disabledIcon="IMG_ELCL_SYNCED_DISABLED"
            icon="IMG_ELCL_SYNCED">
      </image>
      <image
            commandId="org.topcased.requirement.core.linkRequirement"
            icon="icons/current.gif">
      </image>
      <image
            commandId="org.topcased.requirement.core.updateRequirementModel"
            icon="icons/import.gif">
      </image>
      <image
            commandId="org.topcased.requirement.core.unlinkRequirementModel"
            icon="icons/unlink.gif">
      </image>
      <image
            commandId="org.topcased.requirement.core.flat"
            icon="icons/flat-mode.gif">
      </image>
      <image
            commandId="org.topcased.requirement.core.hierarchical"
            icon="icons/tree-mode.gif">
      </image>
      <image
            commandId="org.topcased.requirement.core.sort"
            icon="icons/alphabetic_sorter.gif">
      </image>
      <image
            commandId="org.topcased.requirement.core.delete"
            disabledIcon="IMG_TOOL_DELETE_DISABLED"
            icon="IMG_TOOL_DELETE">
      </image>
      <image
            commandId="org.topcased.requirement.core.copy"
            disabledIcon="IMG_TOOL_COPY_DISABLED"
            icon="IMG_TOOL_COPY">
      </image>
      <image
            commandId="org.topcased.requirement.core.cut"
            disabledIcon="IMG_TOOL_CUT_DISABLED"
            icon="IMG_TOOL_CUT">
      </image>
      <image
            commandId="org.topcased.requirement.core.paste"
            disabledIcon="IMG_TOOL_PASTE_DISABLED"
            icon="IMG_TOOL_PASTE">
      </image>
      <image
            commandId="org.topcased.requirement.core.createCurrentRequirement"
            icon="icons/current.gif">
      </image>
      <image
            commandId="org.topcased.requirement.core.createAnonymousRequirement"
            icon="icons/anonymous.gif">
      </image>
      <image
            commandId="org.topcased.requirement.core.addAttribute"
            icon="icons/AttributeLink.gif">
      </image>
      <image
            commandId="org.topcased.requirement.core.setAsValid"
            icon="icons/checked.gif">
      </image>
      <image
            commandId="org.topcased.requirement.core.setUnsetPartial"
            icon="icons/partial.gif">
      </image>
      <image
            commandId="org.topcased.requirement.core.unallocate"
            icon="icons/unallocate.gif">
      </image>
      <image
            commandId="org.topcased.requirement.core.updateAttribute"
            icon="icons/update.gif">
      </image>
      <image
            commandId="org.topcased.requirement.core.updateAttributeConfiguration"
            icon="icons/update.gif">
      </image>
      <image
            commandId="org.topcased.requirement.core.tree"
            icon="icons/tree-mode.gif">
      </image>
      <image
            commandId="org.topcased.requirement.core.table"
            icon="icons/flat-mode.gif">
      </image>
      <image
            commandId="org.topcased.requirement.core.addDoc"
            disabledIcon="IMG_OBJ_ADD_DISABLED"
            icon="IMG_OBJ_ADD">
      </image>
      <image
            commandId="org.topcased.requirement.core.trackDeletedCurrentRequirements"
            icon="icons/trackdelrq.gif">
      </image>
      <image
            commandId="org.topcased.requirement.core.untrackDeletedCurrentRequirements"
            icon="icons/trackdelrq.gif">
      </image>
   </extension>
   <extension
         point="org.eclipse.ui.perspectives">
      <perspective
            class="org.topcased.requirement.core.internal.TopcasedRequirementPerspectiveFactory"
            icon="icons/ModelingPerspective.gif"
            id="org.topcased.requirement.core.perspective"
            name="Topcased Requirement">
      </perspective>
   </extension>
   <extension
         point="org.eclipse.ui.preferencePages">
      <page
            category="org.topcased.facilities.preferences.TopcasedPreferencePage"
            class="org.topcased.requirement.core.preferences.RequirementPreferencePage"
            id="org.topcased.requirement.preferences"
            name="Requirement">
      </page>
      <page
            category="org.topcased.requirement.preferences"
            class="org.topcased.requirement.core.preferences.UpstreamPreferencePage"
            id="org.topcased.requirement.preferences.upstream"
            name="Upstream Settings">
      </page>
      <page
            category="org.topcased.requirement.preferences.upstream"
            class="org.topcased.requirement.core.preferences.UpstreamStylesPreferencePage"
            id="org.topcased.requirement.preferences.upstream.styles"
            name="Upstream Styles">
      </page>
      <page
            category="org.topcased.requirement.preferences"
            class="org.topcased.requirement.core.preferences.CurrentPreferencePage"
            id="org.topcased.requirement.preferences.current"
            name="Current Settings">
      </page>
      <page
            category="org.topcased.requirement.preferences"
            class="org.topcased.requirement.core.preferences.RequirementNamingPreferencePage"
            id="org.topcased.requirement.preferences.naming"
            name="Requirement Naming Format">
      </page>
   </extension>
   <extension
         id="TrashCurrentReq"
         point="org.eclipse.ui.commands">
      <command
            description="Copy the selection with its children"
            id="org.topcased.requirement.core.copy"
            name="Copy">
      </command>
      <command
            description="Cut the selection with its children"
            id="org.topcased.requirement.core.cut"
            name="Cut">
      </command>
      <command
            description="Delete the selection with its children"
            id="org.topcased.requirement.core.delete"
            name="Delete">
      </command>
      <command
            description="Paste the selection with its children"
            id="org.topcased.requirement.core.paste"
            name="Paste">
      </command>
            <command
            description="Create an anonymous requirement (free text)"
            id="org.topcased.requirement.core.createAnonymousRequirement"
            name="Create Anonymous Requirement">
      </command>
      <command
            description="Create a current requirement"
            id="org.topcased.requirement.core.createCurrentRequirement"
            name="Create Current Requirement">
      </command>
      <command
            description="Link a requirement model to your DSL model"
            id="org.topcased.requirement.core.linkRequirement"
            name="Link Requirement Model">
      </command>
      <command
            description="Link current page focus with editor selection"
            id="org.topcased.requirement.core.linkWithEditor"
            name="Link With Editor">
         <state
               class="org.eclipse.ui.handlers.RegistryToggleState"
               id="org.eclipse.ui.commands.toggleState">
         </state>
      </command>
      <command
            description="Expand all children of selected node"
            id="org.topcased.requirement.core.expand"
            name="Expand Branch">
      </command>
      <command
            description="Collapse all children of selected node"
            id="org.topcased.requirement.core.collapse"
            name="Collapse Branch">
      </command>
      <command
            description="Move up one or several requirements or hierachical elements"
            id="org.topcased.requirement.core.moveUp"
            name="Move Up">
      </command>
      <command
            description="Move down one or several requirements or hierachical elements"
            id="org.topcased.requirement.core.moveDown"
            name="Move Down">
      </command>
      <command
            description="Update your requirement model with an upper version"
            id="org.topcased.requirement.core.updateRequirementModel"
            name="Update Requirement Model">
      </command>
      <command
            description="Unlink (and delete) your requirement model"
            id="org.topcased.requirement.core.unlinkRequirementModel"
            name="Unlink Requirement Model">
      </command>
      <command
            description="Flat representation of the upstream requirements"
            id="org.topcased.requirement.core.flat"
            name="Flat">
         <state
               class="org.eclipse.ui.handlers.RegistryToggleState"
               id="org.eclipse.ui.commands.toggleState">
         </state>
      </command>
      <command
            description="Hierarchical representation of the upstream requirements"
            id="org.topcased.requirement.core.hierarchical"
            name="Hierarchical">
         <state
               class="org.eclipse.ui.handlers.RegistryToggleState"
               id="org.eclipse.ui.commands.toggleState">
         </state>
      </command>
      <command
            description="Sort alphabetically the different elements"
            id="org.topcased.requirement.core.sort"
            name="Sort">
         <state
               class="org.eclipse.ui.handlers.RegistryToggleState"
               id="org.eclipse.ui.commands.toggleState">
         </state>
      </command>
      <command
            description="Link a current requirement focus to his upstream requirement reference"
            id="org.topcased.requirement.core.linkToUpstream"
            name="Link To Upstream Requirement">
         <state
               class="org.eclipse.ui.handlers.RegistryToggleState"
               id="org.eclipse.ui.commands.toggleState">
         </state>
      </command>
      <command
            description="Filter the Current View from the Upstream View selection"
            id="org.topcased.requirement.core.filterCurrentRequirements"
            name="Filter">
         <state
               class="org.eclipse.ui.handlers.RegistryToggleState"
               id="org.eclipse.ui.commands.toggleState">
         </state>
      </command>
      <command
            description="Load a resource into an editing domain&apos;s resource set"
            id="org.topcased.requirement.core.loadResource"
            name="Load Resource">
      </command>
      <command
            description="Adds an Attribute for a Requirement"
            id="org.topcased.requirement.core.addAttribute"
            name="Add Attribute">
      </command>
      <command
            description="Set a current requirement as valid after a requirement models merge"
            id="org.topcased.requirement.core.setAsValid"
            name="Set As Valid">
      </command>
      <command
            description="Set or unset an attribute link to partial"
            id="org.topcased.requirement.core.setUnsetPartial"
            name="Set/Unset Partial">
      </command>
      <command
            description="Unallocate a hierarchical element or a current requirement"
            id="org.topcased.requirement.core.unallocate"
            name="Unallocate">
      </command>
      <command
            description="Update attributes of all the current requirements"
            id="org.topcased.requirement.core.updateAttribute"
            name="Update Attribute">
      </command>
      <command
            description="Update the current requirements attribute configuration"
            id="org.topcased.requirement.core.updateAttributeConfiguration"
            name="Update Attribute Configuration">
      </command>
      <command
            description="Undo last executed command"
            id="org.topcased.requirement.core.undo"
            name="Undo">
      </command>
      <command
            description="Redo last executed command"
            id="org.topcased.requirement.core.redo"
            name="Redo">
      </command>
      <command
            description="Display a requirement tree"
            id="org.topcased.requirement.core.tree"
            name="Tree">
         <state
               class="org.eclipse.ui.handlers.RegistryToggleState"
               id="org.eclipse.ui.commands.toggleState">
         </state>
      </command>
      <command
            description="Display a requirement table"
            id="org.topcased.requirement.core.table"
            name="Table">
         <state
               class="org.eclipse.ui.handlers.RegistryToggleState"
               id="org.eclipse.ui.commands.toggleState">
         </state>
      </command>
      <command
            id="org.topcased.requirement.core.addDoc"
            name="Add a new Document to the Upstream View">
      </command>
      <command
            id="org.topcased.requirement.core.trash"
            name="Trash Current Requirement">
      </command>
      <command
            id="org.topcased.requirement.core.filterTrashRequirements"
            name="Filter Trash Requirements">
         <state
               class="org.eclipse.ui.handlers.RegistryToggleState"
               id="org.eclipse.ui.commands.toggleState">
         </state>
      </command>
      <command
            id="org.topcased.requirement.core.filterInvalidRequirements"
            name="Filter Invalid Requirements">
         <state
               class="org.eclipse.ui.handlers.RegistryToggleState"
               id="org.eclipse.ui.commands.toggleState">
         </state>
      </command>
      <command
            id="org.topcased.requirement.core.filterValidRequirements"
            name="Filter Valid Requirements">
         <state
               class="org.eclipse.ui.handlers.RegistryToggleState"
               id="org.eclipse.ui.commands.toggleState">
         </state>
      </command>
      <command
            id="org.topcased.requirement.core.impactAnalysis"
            name="Launch requirement impact analysis from this revision">
      </command>
      <command
            id="org.topcased.requirement.core.trackDeletedCurrentRequirements"
            name="Track deleted current requirements">
      </command>
      <command
            id="org.topcased.requirement.core.untrackDeletedCurrentRequirements"
            name="Untrack deleted current requirements">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.decorators">
      <decorator
            adaptable="true"
            class="org.topcased.requirement.core.decorators.UpstreamRequirementDecorator"
            id="org.topcased.requirement.core.decorators.upstream"
            label="Upstream Requirement Decorator"
            lightweight="true"
            state="true">
         <enablement>
            <objectClass
                  name="ttm.Requirement">
            </objectClass>
         </enablement>
      </decorator>
   </extension>
   <extension
         point="org.eclipse.ui.propertyPages">
      <page
            category="org.topcased.facilities.preferences.property.TopcasedPreferencePage"
            class="org.topcased.requirement.core.preferences.UpstreamStylesPreferencePage"
            id="org.topcased.requirement.preferences.upstream.styles"
            name="Upstream Styles">
         <enabledWhen>
            <adapt
                  type="org.eclipse.core.resources.IProject">
            </adapt>
         </enabledWhen>
      </page>
      <page
            category="org.topcased.facilities.preferences.property.TopcasedPreferencePage"
            class="org.topcased.requirement.core.preferences.RequirementNamingPreferencePage"
            id="org.topcased.requirement.preferences.property.naming"
            name="Requirement Naming Format">
         <enabledWhen>
            <adapt
                  type="org.eclipse.core.resources.IProject">
            </adapt>
         </enabledWhen>
      </page>
   </extension>
   <extension
         point="org.eclipse.ui.bindings">
      <key
            commandId="org.topcased.requirement.core.expand"
            contextId="org.topcased.requirement.core.currentView"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M2+NUMPAD_MULTIPLY">
      </key>
      <key
            commandId="org.topcased.requirement.core.collapse"
            contextId="org.topcased.requirement.core.currentView"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M2+NUMPAD_DIVIDE">
      </key>
      <key
            commandId="org.topcased.requirement.core.delete"
            contextId="org.topcased.requirement.core.currentView"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="DEL">
      </key>
      <key
            commandId="org.topcased.requirement.core.delete"
            contextId="org.topcased.requirement.core.upstreamView"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="DEL">
      </key>
      <!-- Copy, Cut, Paste commands are all overridden in both views, so that search text can behave the same way in all situations -->
      <key
            commandId="org.topcased.requirement.core.cut"
            contextId="org.topcased.requirement.core.currentView"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+X">
      </key>
      <key
            commandId="org.topcased.requirement.core.cut"
            contextId="org.topcased.requirement.core.currentView"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+DEL">
      </key>
      <key
            commandId="org.topcased.requirement.core.cut"
            contextId="org.topcased.requirement.core.upstreamView"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+X">
      </key>
      <key
            commandId="org.topcased.requirement.core.cut"
            contextId="org.topcased.requirement.core.upstreamView"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+DEL">
      </key>
      <key
            commandId="org.topcased.requirement.core.copy"
            contextId="org.topcased.requirement.core.currentView"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+C">
      </key>
      <key
            commandId="org.topcased.requirement.core.copy"
            contextId="org.topcased.requirement.core.currentView"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+INSERT">
      </key>
      <key
            commandId="org.topcased.requirement.core.copy"
            contextId="org.topcased.requirement.core.upstreamView"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+C">
      </key>
      <key
            commandId="org.topcased.requirement.core.copy"
            contextId="org.topcased.requirement.core.upstreamView"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+INSERT">
      </key>
      <key
            commandId="org.topcased.requirement.core.paste"
            contextId="org.topcased.requirement.core.currentView"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+V">
      </key>
      <key
            commandId="org.topcased.requirement.core.paste"
            contextId="org.topcased.requirement.core.currentView"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+INSERT">
      </key>
      <key
            commandId="org.topcased.requirement.core.paste"
            contextId="org.topcased.requirement.core.upstreamView"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+V">
      </key>
      <key
            commandId="org.topcased.requirement.core.paste"
            contextId="org.topcased.requirement.core.upstreamView"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M2+INSERT">
      </key>
      <key
            commandId="org.topcased.requirement.core.updateAttribute"
            contextId="org.topcased.requirement.core.currentView"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M3+A">
      </key>
      <key
            commandId="org.topcased.requirement.core.updateAttributeConfiguration"
            contextId="org.topcased.requirement.core.currentView"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M2+A">
      </key>
      <key
            commandId="org.topcased.requirement.core.unallocate"
            contextId="org.topcased.requirement.core.currentView"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M3+N">
      </key>
      <key
            commandId="org.topcased.requirement.core.setUnsetPartial"
            contextId="org.topcased.requirement.core.currentView"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M3+P">
      </key>
      <key
            commandId="org.topcased.requirement.core.setAsValid"
            contextId="org.topcased.requirement.core.currentView"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M3+CR">
      </key>
      <key
            commandId="org.topcased.requirement.core.filterInvalidRequirements"
            contextId="org.topcased.requirement.core.currentView"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M2+I">
      </key>
      <key
            commandId="org.topcased.requirement.core.filterValidRequirements"
            contextId="org.topcased.requirement.core.currentView"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M2+V">
      </key>
      <key
            commandId="org.topcased.requirement.core.filterCurrentRequirements"
            contextId="org.topcased.requirement.core.currentView"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M2+C">
      </key>
      <key
            commandId="org.topcased.requirement.core.filterTrashRequirements"
            contextId="org.topcased.requirement.core.currentView"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M2+T">
      </key>
      <key
            commandId="org.topcased.requirement.core.linkToUpstream"
            contextId="org.topcased.requirement.core.currentView"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M2+L">
      </key>
      <key
            commandId="org.topcased.requirement.core.addAttribute"
            contextId="org.topcased.requirement.core.currentView"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M3+A">
      </key>
      <key
            commandId="org.topcased.requirement.core.createAnonymousRequirement"
            contextId="org.topcased.requirement.core.currentView"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M3+F">
      </key>
      <key
            commandId="org.topcased.requirement.core.createCurrentRequirement"
            contextId="org.topcased.requirement.core.currentView"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M3+C">
      </key>
      <key
            commandId="org.topcased.requirement.core.loadResource"
            contextId="org.topcased.requirement.core.currentView"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M3+L">
      </key>
      <key
            commandId="org.topcased.requirement.core.undo"
            contextId="org.topcased.requirement.core.currentView"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+Z">
      </key>
      <key
            commandId="org.topcased.requirement.core.undo"
            contextId="org.topcased.requirement.core.upstreamView"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+Z">
      </key>
      <key
            commandId="org.topcased.requirement.core.redo"
            contextId="org.topcased.requirement.core.currentView"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+Y">
      </key>
      <key
            commandId="org.topcased.requirement.core.redo"
            contextId="org.topcased.requirement.core.upstreamView"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+Y">
      </key>
      <key
            commandId="org.topcased.requirement.core.createCurrentRequirement"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M3+C">
      </key>
      <key
            commandId="org.topcased.requirement.core.createAnonymousRequirement"
            contextId="org.eclipse.ui.contexts.window"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M3+F">
      </key>
   </extension>
   <extension
         point="org.eclipse.ui.contexts">
      <context
            description="The current view context"
            id="org.topcased.requirement.core.currentView"
            name="In current view"
            parentId="org.eclipse.ui.contexts.window">
      </context>
      <context
            description="The upstream view context"
            id="org.topcased.requirement.core.upstreamView"
            name="In upstream view"
            parentId="org.eclipse.ui.contexts.window">
      </context>
   </extension>

   <extension
         point="org.eclipse.ui.views">
      <view
            name="Upstream Requirement"
            icon="icons/upstream.gif"
            category="org.topcased.facilities.views"
            class="org.topcased.requirement.core.views.upstream.UpstreamRequirementView"
            id="org.topcased.requirement.core.upstreamView">
      </view>
      <view
            category="org.topcased.facilities.views"
            class="org.topcased.requirement.core.views.current.CurrentRequirementView"
            icon="icons/current.gif"
            id="org.topcased.requirement.core.currentView"
            name="Current Requirement">
      </view>
   </extension>
   <!-- TODO : see why there is a conflict with global binding -->
   <!--extension
         point="org.eclipse.ui.bindings">
      <key
            commandId="org.topcased.requirement.core.cutModelObject"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+X">
      </key>
      <key
            commandId="org.topcased.requirement.core.copyModelObject"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+C">
      </key>
      <key
            commandId="org.topcased.requirement.core.pasteModelObject"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+V">
      </key>
      <key
            commandId="org.topcased.requirement.core.undo"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+Z">
      </key>
      <key
            commandId="org.topcased.requirement.core.redo"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+Y">
      </key>
   </extension-->
   <extension
         point="org.eclipse.ui.views.properties.tabbed.propertyContributor">
      <propertyContributor
            contributorId="org.topcased.requirement.core.contributor"
            labelProvider="org.topcased.requirement.core.providers.RequirementModelerLabelProvider"
            typeMapper="org.topcased.tabbedproperties.TabbedPropertiesTypeMapper">
         <propertyCategory
               category="model">
         </propertyCategory>
         <propertyCategory
               category="advanced">
         </propertyCategory>
      </propertyContributor>
   </extension>
   <extension
         point="org.eclipse.ui.views.properties.tabbed.propertyTabs">
      <propertyTabs
            contributorId="org.topcased.requirement.core.contributor">
         <propertyTab
               category="model"
               id="org.topcased.requirement.core.modelTab"
               label="Model">
         </propertyTab>
         <propertyTab
               category="advanced"
               id="org.topcased.requirement.core.advancedTab"
               label="Advanced">
         </propertyTab>
      </propertyTabs>
   </extension>
   <extension
         point="org.eclipse.ui.views.properties.tabbed.propertySections">
      <propertySections
            contributorId="org.topcased.requirement.core.contributor">
         <propertySection
               class="org.topcased.requirement.core.properties.sections.IdentifiedElementIdentifierPropertySection"
               id="org.topcased.requirement.core.properties.sections.IdentifiedElementIdentifierPropertySection"
               tab="org.topcased.requirement.core.modelTab">
            <input
                  type="org.topcased.requirement.IdentifiedElement">
            </input>
         </propertySection>
         <propertySection
               afterSection="org.topcased.requirement.core.properties.sections.IdentifiedElementIdentifierPropertySection"
               class="org.topcased.requirement.core.properties.sections.IdentifiedIElementDescriptionPropertySection"
               id="org.topcased.requirement.core.properties.sections.IdentifiedIElementDescriptionPropertySection"
               tab="org.topcased.requirement.core.modelTab">
            <input
                  type="org.topcased.requirement.IdentifiedElement">
            </input>
         </propertySection>
         <propertySection
               class="org.topcased.requirement.core.properties.sections.AttributeNamePropertySection"
               id="org.topcased.requirement.core.properties.sections.AttributeNamePropertySection"
               tab="org.topcased.requirement.core.modelTab">
            <input
                  type="org.topcased.requirement.Attribute">
            </input>
         </propertySection>
         <propertySection
               afterSection="org.topcased.requirement.core.properties.sections.AttributeNamePropertySection"
               class="org.topcased.requirement.core.properties.sections.ObjectAttributeValuePropertySection"
               id="org.topcased.requirement.core.properties.sections.ObjectAttributeValuePropertySection"
               tab="org.topcased.requirement.core.modelTab">
            <input
                  type="org.topcased.requirement.ObjectAttribute">
            </input>
         </propertySection>
         <propertySection
               afterSection="org.topcased.requirement.core.properties.sections.ObjectAttributeValuePropertySection"
               class="org.topcased.requirement.core.properties.sections.AttributeLinkPartialPropertySection"
               id="org.topcased.requirement.core.properties.sections.AttributeLinkPartialPropertySection"
               tab="org.topcased.requirement.core.modelTab">
            <input
                  type="org.topcased.requirement.AttributeLink">
            </input>
         </propertySection>
         <propertySection
               afterSection="org.topcased.requirement.core.properties.sections.AttributeNamePropertySection"
               class="org.topcased.requirement.core.properties.sections.TextAttributeSingleValuePropertySection"
               filter="org.topcased.requirement.core.properties.filters.TextAttributeSingleValueFilter"
               id="org.topcased.requirement.core.properties.sections.TextAttributeSingleValuePropertySection"
               tab="org.topcased.requirement.core.modelTab">
            <input
                  type="org.topcased.requirement.TextAttribute">
            </input>
         </propertySection>
         <propertySection
               afterSection="org.topcased.requirement.core.properties.sections.AttributeNamePropertySection"
               class="org.topcased.requirement.core.properties.sections.TextAttributeMultiValuePropertySection"
               filter="org.topcased.requirement.core.properties.filters.TextAttributeMultiValueFilter"
               id="org.topcased.requirement.core.properties.sections.TextAttributeMultiValuePropertySection"
               tab="org.topcased.requirement.core.modelTab">
            <input
                  type="org.topcased.requirement.TextAttribute">
            </input>
         </propertySection>
         <propertySection
               class="org.topcased.requirement.core.properties.sections.ConfiguratedAttributeNamePropertySection"
               id="org.topcased.requirement.core.properties.sections.ConfiguratedAttributeNamePropertySection"
               tab="org.topcased.requirement.core.modelTab">
            <input
                  type="org.topcased.requirement.ConfiguratedAttribute">
            </input>
         </propertySection>
         <propertySection
               afterSection="org.topcased.requirement.core.properties.sections.ConfiguratedAttributeNamePropertySection"
               class="org.topcased.requirement.core.properties.sections.ConfiguratedAttributeTypePropertySection"
               id="org.topcased.requirement.core.properties.sections.ConfiguratedAttributeTypePropertySection"
               tab="org.topcased.requirement.core.modelTab">
            <input
                  type="org.topcased.requirement.ConfiguratedAttribute">
            </input>
         </propertySection>
         <propertySection
               class="org.topcased.requirement.core.properties.sections.AttributeValueNamePropertySection"
               id="org.topcased.requirement.core.properties.sections.AttributeValueNamePropertySection"
               tab="org.topcased.requirement.core.modelTab">
            <input
                  type="org.topcased.requirement.AttributeValue">
            </input>
         </propertySection>
         <propertySection
               afterSection="org.topcased.requirement.core.properties.sections.AttributeValueNamePropertySection"
               class="org.topcased.requirement.core.properties.sections.DefaultAttributeValuePropertySection"
               id="org.topcased.requirement.core.properties.sections.DefaultAttributeValuePropertySection"
               tab="org.topcased.requirement.core.modelTab">
            <input
                  type="org.topcased.requirement.AttributeValue">
            </input>
         </propertySection>
         <propertySection
               class="org.topcased.tabbedproperties.sections.AdvancedPropertySection"
               id="org.topcased.requirement.core.AdvancedSection"
               tab="org.topcased.requirement.core.advancedTab">
            <input
                  type="org.topcased.requirement.IdentifiedElement">
            </input>
            <input
                  type="org.topcased.requirement.Attribute">
            </input>
            <input
                  type="org.topcased.requirement.ConfiguratedAttribute">
            </input>
            <input
                  type="org.topcased.requirement.AttributeValue">
            </input>
         </propertySection>
      </propertySections>         
   </extension>
   <extension
         point="org.topcased.requirement.core.requirementCountingAlgorithm">
      <algorithm
            class="org.topcased.requirement.core.extensions.DefaultRequirementCountingAlgorithm"
            description="Provide a default algorithm for requirement counting : The index is stored on the root hierarchical element of the requirement model and is incremented when a current requirement is created"
            name="Default Algorithm">
      </algorithm>
      <algorithm
            class="org.topcased.requirement.core.extensions.RegexRequirementCountingAlgorithm"
            description="This algorithm is based on regular expressions. The index for a new current requirement is the (maximum number + step) of all the already created current requirements. With this algorithm, we recommend to use a naming pattern similar to E_{resource name}_{index}. "
            name="Regex Algorithm">
      </algorithm>
   </extension>
   <extension
         point="org.topcased.requirement.core.requirementIdentifierVariables">
      <variables
            class="org.topcased.requirement.core.extensions.DefaultRequirementIdentifierVariables"
            id="Default Variables">
      </variables>
   </extension>
   <extension
         point="org.eclipse.core.expressions.propertyTesters">
      <propertyTester
            class="org.topcased.requirement.core.testers.NotLastAttributePropertyTester"
            id="org.topcased.requirement.core.testers.NotLastAttributePropertyTester"
            namespace="org.topcased.requirement.core"
            properties="notLastAttribute"
            type="org.topcased.requirement.ObjectAttribute">
      </propertyTester>
      <propertyTester
            class="org.topcased.requirement.core.testers.CanPastePropertyTester"
            id="org.topcased.requirement.core.testers.CanPastePropertyTester"
            namespace="org.topcased.requirement.core"
            properties="canPaste"
            type="org.topcased.requirement.HierarchicalElement">
      </propertyTester>
      <propertyTester
            class="org.topcased.requirement.core.testers.CanCreateRequirementPropertyTester"
            id="org.topcased.requirement.core.testers.CanCreateRequirementPropertyTester"
            namespace="org.topcased.requirement.core"
            properties="canCreateRequirement"
            type="org.eclipse.gef.EditPart">
      </propertyTester>
      <propertyTester
            class="org.topcased.requirement.core.testers.IsImpactedPropertyTester"
            id="org.topcased.requirement.core.testers.IsImpactedPropertyTester"
            namespace="org.topcased.requirement.core"
            properties="isImpacted"
            type="org.topcased.requirement.IdentifiedElement">
      </propertyTester>
      <propertyTester
            class="org.topcased.requirement.core.testers.EnablesRequirementsPropertyTester"
            id="org.topcased.requirement.core.testers.EnablesRequirementsPropertyTest"
            namespace="org.topcased.requirement.core"
            properties="activeEditorEnablesRequirements"
            type="org.eclipse.ui.part.EditorPart">
      </propertyTester>
   </extension>
   <extension
         point="org.topcased.requirement.core.upstreamstyles">
      <styleEvaluator
            class="org.topcased.requirement.core.views.upstream.styles.LinkedUpstreamRequirementStyle"
            name="Linked"
            priority="Low">
      </styleEvaluator>
   </extension>
   <extension
         point="org.eclipse.gmf.runtime.diagram.ui.decoratorProviders">
      <decoratorProvider
            class="org.topcased.requirement.core.decorators.CurrentReqEditPartDecoratorProvider">
         <Priority
               name="Lowest">
         </Priority>
         <object
               class="org.eclipse.emf.ecore.EObject(org.eclipse.emf.ecore)"
               id="EObject">
         </object>
         <context
               decoratorTargets="EObject">
         </context>
      </decoratorProvider>
   </extension>
   <extension
         point="org.topcased.requirement.core.updateTransformationProvider">
      <Provider
            extension="docimport"
            providerInstance="org.topcased.requirement.core.transformation.impl.TypeTransformation$TypeProvider">
      </Provider>
      <Provider
            extension="requirement"
            providerInstance="org.topcased.requirement.core.transformation.impl.InPlaceTransformation$InPlaceProvider">
      </Provider>
   </extension>
   <extension
         point="org.eclipse.emf.compare.match.engine">
      <matchengine
            engineClass="org.topcased.requirement.core.compare.ReqMatchEngine"
            fileExtension="requirement"
            label="ReqMatchEngine"
            namespace="http://org.topcased.traceability.model"
            priority="highest">
      </matchengine>
   </extension> 
   <extension
         point="org.eclipse.ui.dropActions">
      <action
            class="org.topcased.requirement.core.dnd.UpstreamRequirementPluginAdapter"
            id="org.topcased.requirement.core.upstreamRequirementDrop">
      </action>
   </extension>
</plugin>
